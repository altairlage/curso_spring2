

















<!DOCTYPE html>
<html lang="pt-BR" data-product="alura">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	
	<title>Spring MVC II: Aula 6 - Atividade 4 Explicação | Alura - Cursos online de tecnologia</title>
	
	
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1059.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script><link rel="shortcut icon" href="/images/alura/favicon.ico">
	
	<link href='//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Open+Sans:400,300,600,700,800|Source+Serif+Pro' rel='stylesheet'>
	<link rel="preconnect" href="https://fonts.gstatic.com">
	
	<link rel="stylesheet" href="/style/lib/video-js.fcfc2231.css">
    <link rel="stylesheet" href="/style/lib/video-js-resolutions.b7de6fd3.css">
    <link rel="stylesheet" href="/style/lib/prettify.1b9e73a7.css">

	<link rel="stylesheet" href="/style/gnarus/base.7f0645a5.css">
	<link rel="stylesheet" href="/style/gnarus/block/formattedText.781e69ae.css">
	
	<link rel="stylesheet" href="/style/gnarus/page/classPage/container.d7849dcf.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/classPage.21eeda42.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/menuSettings.da4e6ad5.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/alternativeList.8a13652e.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/taskFeedback.4bdd6c19.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/markdown.19173ffa.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/finishSection.0a96466a.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/phrase.6d880b7f.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/hqexplanation.3ed41021.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/openquestion.811813bb.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/textcontent.7298b79f.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/video.45bb70c3.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/singlechoice.05e6d21d.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/music.324695f6.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/multiplechoice.9df58fa7.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/videodialog.fc98d79c.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/fillintheblank.81cde842.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/speakingpractice.5068bb32.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/pronunciationpractice.7d2876f7.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/repetition.0dac6920.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/genericVideo.2942980e.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/taskContent.000f28c0.css">
	<link rel="stylesheet" href="/style/gnarus/page/classPage/taskButtons.563efe7a.css">
	<link rel="stylesheet" href="/style/gnarus/block/markdownEditor.26173654.css">
	<link rel="stylesheet" href="/style/gnarus/block/audioPlayer.be1ece2d.css">

	
	
	<style type="text/css">
		.task:before {
			background-color: #FFE000;
		}
	</style>
	
	
	
	</head>
<body>

<section class='task' data-task-type="hqexplanation" data-task-id="18990" data-author-id="75042" data-course-code="springmvc-2-integracao-cache-seguranca-e-templates" data-section-number="6" data-domain="cursos.alura.com.br" data-hasFeedbackAnswer="false" data-url-prefix="/">
	<button title="Abrir/Fechar menu" aria-label="Abrir/Fechar menu" type="button" class='openMenu-button task-body-button '></button>
	
	<section class="task-body">
		<header class="task-body-header">
			<div class="container">
				<h1 class="task-body-header-title">
					<svg class="task-body-header-title-svg" aria-label="Atividade de Explicação">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#HQ_EXPLANATION" />
					</svg>
					<small>04</small>
					<span class="task-body-header-title-text"> Explicação</span>
				</h1>
				<div class="task-body-header-actions">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/18990/next" aria-hidden="true" class="task-actions-button task-actions-button-next task-submit">Próxima Atividade</a>
				</div>
			</div>
		</header>
		<main class="task-body-main" data-should-warn="false">
			






	
		




<section class="hqExplanation" id="task-content">
	<div class="container">
	




<div class="settings">
	<button type="button" class="settings-button" aria-label="Configurações"></button>
	<div class="settings-box">
		<span class="settings-box-title"></span>
		<ul class="settings-box-list">
			
				
				
				
					<li class="settings-box-item settings-box-item-player"><a class="settings-box-item-player--disabled" onclick="event.preventDefault();">Mudar o Player</a></li>
					
						<li class="settings-box-item settings-box-item-suggestion"><a href="/suggestions/new/springmvc-2-integracao-cache-seguranca-e-templates/18990/question">Sugerir Melhoria</a></li>
					
				
			
			
		</ul>
	</div>
</div>
		<div class="formattedText">
			<h1>Mudando o locale dinamicamente</h1>
<p>Após o projeto finalizado, caso seja necessário, o mesmo precisará ser internacionalizado, ou seja, suportar diversos idiomas. Veja a <a href="http://casadocodigo.com.br" rel="nofollow">Casa do Código</a> por exemplo, ela tem uma versão de seu site em Inglês chamada <a href="http://www.codecrushing.com/" rel="nofollow">Code Crushing</a>.</p>
<p>Mas como poderíamos fazer isso. Talvez duplicar todo o código em duas pastas diferentes e traduzir cada parte do site pudesse resolver, certo? Apesar de ser possível, é uma péssima solução, porque estaríamos duplicando todo código da aplicação. Imagine se tivéssemos que suportar além do Inglês, também em Espanhol? Duplicaríamos de novo?</p>
<p>A internacionalização na web visa ter um único site onde se é possível trocar de idioma sem que seja necessário carregar um outro site diferente. Ou seja, o mesmo site em idiomas diferentes.</p>
<p>O primeiro passo para conseguirmos fazer isso é abrir o arquivo <code>messages.properties</code> que criamos no primeiro módulo deste curso e começar a traduzir partes do site neste arquivo. Começando pelo menu principal do site da Casa do Código teríamos:</p>
<pre class="prettyprint"><code>navegacao.categoria.home &#61; Home
navegacao.categoria.agile &#61; Agilidade
navegacao.categoria.front_end &#61; Front End
navegacao.categoria.games &#61; Jogos
navegacao.categoria.java &#61; Java
navegacao.categoria.mobile &#61; Mobile
navegacao.categoria.outros &#61; Outros

menu.carrinho &#61; Seu carrinho
menu.sobre &#61; Sobre nós</code></pre>
<p>O segundo passo é usar as tags de formatação <em>JSP</em> para utilizar os textos que temos no arquivo <code>messages.properties</code> através da tag <code>fmt:message</code>. Esta que têm um atributo chamado <code>key</code> onde passamos exatamente o chave da mensagem que queremos exibir.</p>
<p>No arquivo <code>cabecalho.jsp</code>, podemos procurar onde os termos do menu se encontram e substitui-los pelo uso da tag <code>fmt:message</code>. Não esquecendo de importar a <em>taglib</em> corretamente.
O cabeçalho como está atualmente:</p>
<pre class="prettyprint"><code>&lt;%&#64; taglib uri&#61;&#34;http://www.springframework.org/tags&#34; prefix&#61;&#34;s&#34; %&gt;

  &lt;header id&#61;&#34;layout-header&#34;&gt;
        &lt;div class&#61;&#34;clearfix container&#34;&gt;
            &lt;a href&#61;&#34;${s:mvcUrl(&#39;HC#index&#39;).build()}&#34; id&#61;&#34;logo&#34;&gt;
                &lt;img src&#61;&#34;https://cdn.rawgit.com/alura-cursos/spring-mvc-i-criando-aplicacoes-web-master/master/src/main/webapp/resources/imagens/cdc-logo.svg&#34; /&gt;
            &lt;/a&gt;
            &lt;div id&#61;&#34;header-content&#34;&gt;
                &lt;nav id&#61;&#34;main-nav&#34;&gt;
                    &lt;ul class&#61;&#34;clearfix&#34;&gt;
                        &lt;li&gt;
                            &lt;a href&#61;&#34;${s:mvcUrl(&#39;CCC#itens&#39;).build()}&#34; rel&#61;&#34;nofollow&#34;&gt; 
                                Carrinho ( ${carrinhoCompras.quantidade} )
                            &lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li&gt;&lt;a href&#61;&#34;/pages/sobre-a-casa-do-codigo&#34; rel&#61;&#34;nofollow&#34;&gt;Sobre Nós&lt;/a&gt;&lt;/li&gt;
                        &lt;li&gt;&lt;a href&#61;&#34;/pages/perguntas-frequentes&#34; rel&#61;&#34;nofollow&#34;&gt;Perguntas Frequentes&lt;/a&gt;&lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/nav&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/header&gt;
    &lt;nav class&#61;&#34;categories-nav&#34;&gt;
        &lt;ul class&#61;&#34;container&#34;&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;http://www.casadocodigo.com.br&#34;&gt;Home&lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/livros-de-agile&#34;&gt;Agile &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/livros-de-front-end&#34;&gt;Front End &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/livros-de-games&#34;&gt;Games &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/livros-de-java&#34;&gt;Java &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/livros-de-mobile&#34;&gt;Mobile &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a    href&#61;&#34;/collections/livros-desenvolvimento-web&#34;&gt; Web &lt;/a&gt;&lt;/li&gt;
            &lt;li class&#61;&#34;category&#34;&gt;&lt;a href&#61;&#34;/collections/outros&#34;&gt; Outros &lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/nav&gt;</code></pre>
<p>Cabeçalho com o uso da tag <code>fmt:message</code>:</p>
<pre class="prettyprint"><code>&lt;%&#64; taglib uri&#61;&#34;http://www.springframework.org/tags&#34; prefix&#61;&#34;s&#34; %&gt;
&lt;%&#64; taglib uri&#61;&#34;http://java.sun.com/jsp/jstl/fmt&#34; prefix&#61;&#34;fmt&#34; %&gt;

&lt;header id&#61;&#34;layout-header&#34;&gt;
    &lt;div class&#61;&#34;clearfix container&#34;&gt;
        &lt;a href&#61;&#34;${s:mvcUrl(&#39;HC#index&#39;).build()}&#34; id&#61;&#34;logo&#34;&gt;
            &lt;img src&#61;&#34;https://cdn.rawgit.com/alura-cursos/spring-mvc-i-criando-aplicacoes-web-master/master/src/main/webapp/resources/imagens/cdc-logo.svg&#34; /&gt;
        &lt;/a&gt;
        &lt;div id&#61;&#34;header-content&#34;&gt;
            &lt;nav id&#61;&#34;main-nav&#34;&gt;
                &lt;ul class&#61;&#34;clearfix&#34;&gt;
                    &lt;li&gt;
                        &lt;a href&#61;&#34;${s:mvcUrl(&#39;CCC#itens&#39;).build()}&#34; rel&#61;&#34;nofollow&#34;&gt; 
                            &lt;fmt:message key&#61;&#34;menu.carrinho&#34;/&gt; 
                        &lt;/a&gt;
                    &lt;/li&gt;
                    &lt;li&gt;
                        &lt;a href&#61;&#34;/pages/sobre-a-casa-do-codigo&#34; rel&#61;&#34;nofollow&#34;&gt;
                            &lt;fmt:message key&#61;&#34;menu.sobre&#34;/&gt;
                        &lt;/a&gt;
                    &lt;/li&gt;
                    &lt;li&gt;&lt;a href&#61;&#34;/pages/perguntas-frequentes&#34; rel&#61;&#34;nofollow&#34;&gt;Perguntas Frequentes&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/nav&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/header&gt;
&lt;nav class&#61;&#34;categories-nav&#34;&gt;
    &lt;ul class&#61;&#34;container&#34;&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;http://www.casadocodigo.com.br&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.home&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/livros-de-agile&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.agile&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/livros-de-front-end&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.front_end&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/livros-de-games&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.games&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/livros-de-java&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.java&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/livros-de-mobile&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.mobile&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a    href&#61;&#34;/collections/livros-desenvolvimento-web&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.web&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li class&#61;&#34;category&#34;&gt;
            &lt;a href&#61;&#34;/collections/outros&#34;&gt;
                &lt;fmt:message key&#61;&#34;navegacao.categoria.&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/nav&gt;</code></pre>
<p>E visualmente já podemos ver diferenças. O cabeçalho que antes estava desta forma:
<img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-cabecalho-antes-traducao.png" alt="cabecalho sem internacionalização" />
Agora é exibido assim:
<img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-cabecalho-depois-traducao.png" alt="cabecalho com internacionalização" /></p>
<p>Mas da forma que fizemos, acabamos perdendo a quantidade de itens no carrinho que era exibido no menu. A solução é passar esse valor por parametro. No <code>messages.propeties</code> teremos:</p>
<pre class="prettyprint"><code>[...]
menu.carrinho &#61; Seu carrinho ({0})
[...]</code></pre>
<p><strong>Observação</strong>: O termo <code>{0}</code> indica que estamos recebendo um paramêtro para ser exibido com a mensagem e o número indica que queremos o parametro naquela posição, <code>0</code> no caso, seria o primeiro paramêtro.</p>
<p>E para passar este paramêtro, precisamos mudar a tag <code>fmt:message</code> para que em seu corpo possamos usar a tag <code>fmt:param</code> especificando o valor do parametro.</p>
<pre class="prettyprint"><code>&lt;li&gt;
    &lt;a href&#61;&#34;${s:mvcUrl(&#39;CCC#itens&#39;).build()}&#34; rel&#61;&#34;nofollow&#34;&gt; 
        &lt;fmt:message key&#61;&#34;menu.carrinho&#34;&gt;
            &lt;fmt:param value&#61;&#34;${carrinhoCompras.quantidade}&#34;/&gt;
        &lt;/fmt:message&gt;
    &lt;/a&gt;
&lt;/li&gt;</code></pre>
<p>E assim teremos o contador de itens no carrinho de volta:
<img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-cabecalho-contador-retorna.png" alt="numero de itens no carrinho sendo exibido" /></p>
<p>O que fizemos até aqui foi simplesmente traduzir algumas mensagens. Vamos internacionalizar realmente. Vamos por mensagens em Inglês agora. Crie um novo arquivo de mensagens e nomeie este arquivo como <code>messages_en_US.properties</code> e cole as mensagens já traduzidas a seguir:</p>
<pre class="prettyprint"><code>field.required &#61; Required field
field.required.produto.titulo &#61; Field title is required
field.required.produto.numeros &#61; Field pages is required
field.required.produto.descricao &#61; Field description is required
typeMismatch &#61; The data type is invalid
typeMismatch.produto.numeros &#61; Type a valid value: Example &#34;100&#34;

navegacao.categoria.home &#61; Home
navegacao.categoria.agile &#61; Agile
navegacao.categoria.front_end &#61; Front End
navegacao.categoria.games &#61; Games
navegacao.categoria.java &#61; Java
navegacao.categoria.mobile &#61; Mobile
navegacao.categoria.web &#61; Web
navegacao.categoria.outros &#61; Others

menu.carrinho &#61; Shopping Cart ({0})
menu.sobre &#61; About us</code></pre>
<p><strong>Observação</strong>: Note que o nome do arquivo tem um novo sufixo (<code>en_US</code>) que diz respeito ao <strong>Locale</strong> do usuário. Originalmente o <em>locale</em> é separado por traço (<code>en-US</code> ou <code>pt-BR</code>), mas geralmente as linguagens de programação traduzem o traço para o <em>underline</em> quando usados recursos de localização.</p>
<p>Agora nosso cabeçalho aparece totalmente em Inglês mesmo que nossas configurações do navegador estejam em Português.</p>
<p><img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-cabecalho-ingles.png" alt="site todo em ingles" /></p>
<p>Isso acontece por que o nosso navegador não solicita somente que a página venha em português, mas em inglês também. Se verificarmos nos cabeçalhos de requisição nas ferramentas do desenvolvedor, veremos que o navegador neste caso, aceita que as páginas sejam enviadas tando em português quanto em inglês.</p>
<p><img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-request-idiomas.png" alt="requisição do navegador" /></p>
<p>E se verificarmos nas configurações, teremos os idiomas que o navegador suporta para configurar um ou outro como padrão.
<img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-navegador-idiomas.png" alt="idiomas do navegador" /></p>
<p>Por nosso navegador aceitar diversos idiomas, o <em>Spring</em> irá responder com o idioma que encontrar primeiro. Ele deveria responder em português já que é o primeiro idioma na lista da requisição, mas não, por que? Por que o <em>Spring</em> está buscando por um arquivo com o sufixo <code>pt_BR</code>. </p>
<p>Como não encontra, o <em>Spring</em> passa para o próximo da lista, neste caso, somente <code>pt</code>, mas também não encontra e então encontra o <code>en_US</code> com o qual responde. O <code>messages.properties</code> sem sufixo só irá ser usado em último caso. O que podemos fazer então para que nosso cabeçalho volte a ficar em português? Simples, duplicaremos o arquivo <code>messages.properties</code> e adicionaremos o sufixo <code>pt</code>. Assim o arquivo se chamará <code>messages_pt.properties</code>.</p>
<p>Para exibição de mensagens parametrizadas, como a do carrinho de compras por exemplo, existe uma forma mais curta de exibi-la. Usando a tag <code>s:message</code> do <em>Spring</em> podemos por meio do atributo <code>code</code> definir qual é a chave da mensagem a ser exibida e através do atribudo <code>arguments</code> definir o valor do parametro esperado.</p>
<p>A exibição do texto do menu do carrinho de compras pode passar desta forma:</p>
<pre class="prettyprint"><code>&lt;fmt:message key&#61;&#34;menu.carrinho&#34;&gt;
    &lt;fmt:param value&#61;&#34;${carrinhoCompras.quantidade}&#34;/&gt;
&lt;/fmt:message&gt;</code></pre>
<p>Para esta forma:</p>
<pre class="prettyprint"><code>&lt;s:message code&#61;&#34;menu.carrinho&#34; arguments&#61;&#34;${carrinhoCompras.quantidade}&#34; /&gt;</code></pre>
<h2>Mudando locale dinamicamente</h2>
<p>Apesar de termos traduzido partes da aplicação para os idiomas requeridos, de certa forma, deixamos o usuário preso a uma única opção, que depende das configurações de seu navegador. O comum nas aplicação é vermos a possibilidade de alterar o idioma por ação de algum menu.</p>
<p>Adicionaremos no menu do cabeçalho as duas opções de idioma, inglês e português. Vejamos como se encontra o menu atualmente:</p>
<pre class="prettyprint"><code>&lt;nav id&#61;&#34;main-nav&#34;&gt;
    &lt;ul class&#61;&#34;clearfix&#34;&gt;
        &lt;li&gt;
            &lt;a href&#61;&#34;${s:mvcUrl(&#39;CCC#itens&#39;).build()}&#34; rel&#61;&#34;nofollow&#34;&gt; 
                &lt;s:message code&#61;&#34;menu.carrinho&#34; arguments&#61;&#34;${carrinhoCompras.quantidade}&#34; /&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
            &lt;a href&#61;&#34;/pages/sobre-a-casa-do-codigo&#34; rel&#61;&#34;nofollow&#34;&gt;
                &lt;fmt:message key&#61;&#34;menu.sobre&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/nav&gt;</code></pre>
<p>O que podemos fazer é criar mais duas opções de menu, duplicado as tags <code>li</code> e em vez de um link para uma página, passaremos apenas um parâmetro do tipo <code>GET</code> usando como chave o <code>locale</code> e como valor o sufixo do idioma. Considerando isso, teremos:</p>
<pre class="prettyprint"><code>&lt;li&gt;
    &lt;a href&#61;&#34;?locale&#61;pt&#34; rel&#61;&#34;nofollow&#34;&gt;
        &lt;fmt:message key&#61;&#34;menu.pt&#34;/&gt;
    &lt;/a&gt;
&lt;/li&gt;

&lt;li&gt;
    &lt;a href&#61;&#34;?locale&#61;en_UR&#34; rel&#61;&#34;nofollow&#34;&gt;
        &lt;fmt:message key&#61;&#34;menu.en&#34;/&gt;
    &lt;/a&gt;
&lt;/li&gt;</code></pre>
<p>E o menu completo será:</p>
<pre class="prettyprint"><code>&lt;nav id&#61;&#34;main-nav&#34;&gt;
    &lt;ul class&#61;&#34;clearfix&#34;&gt;
        &lt;li&gt;
            &lt;a href&#61;&#34;${s:mvcUrl(&#39;CCC#itens&#39;).build()}&#34; rel&#61;&#34;nofollow&#34;&gt; 
                &lt;s:message code&#61;&#34;menu.carrinho&#34; arguments&#61;&#34;${carrinhoCompras.quantidade}&#34; /&gt;
            &lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
            &lt;a href&#61;&#34;/pages/sobre-a-casa-do-codigo&#34; rel&#61;&#34;nofollow&#34;&gt;
                &lt;fmt:message key&#61;&#34;menu.sobre&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;

        &lt;li&gt;
            &lt;a href&#61;&#34;?locale&#61;pt&#34; rel&#61;&#34;nofollow&#34;&gt;
                &lt;fmt:message key&#61;&#34;menu.pt&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;

        &lt;li&gt;
            &lt;a href&#61;&#34;?locale&#61;en_UR&#34; rel&#61;&#34;nofollow&#34;&gt;
                &lt;fmt:message key&#61;&#34;menu.en&#34;/&gt;
            &lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/nav&gt;</code></pre>
<p>Veja que já utilizamos o <code>fmt:message</code> para usar as mensagens do <code>messages.properties</code>. Desta forma teremos que por nos arquivos de idiomas as chaves com os valores:</p>
<pre class="prettyprint"><code>menu.pt &#61; Português
menu.en &#61; English</code></pre>
<p>E o menu já é apresentado com as opções de idiomas.
<img src="https://s3.amazonaws.com/caelum-online-public/SpringMVC-criando-webapp-ii/spring-mvc-II-aula6-menu-idiomas.png" alt="menu com opções de idiomas" /></p>
<p>Agora será que funciona? Ao clicarmos vemos que nada muda, ou seja, ainda não funciona. Claro, o <em>Spring</em> não sabe se deve mudar o idioma baseado nesta simples mudança na URL. Precisamos configurá-lo para que isso ocorra.</p>
<p>O que precisamos fazer é que alguém verifique na requisição a mudança do <code>locale</code> e também armazenar essa mudança em algum lugar, se não o usuário terá que mudar de idioma toda vez que mudar de página. O responsável por interpretar a mudança será um <code>interceptor</code> e armazenaremos o valor do <code>locale</code> do usuário nos <strong>cookies</strong> do navegador. </p>
<p>Na classe <code>AppWebConfiguration</code>, usaremos o método <code>addInterceptors</code> que recebe um objeto chamado <code>registry</code> do tipo <code>InterceptorRegistry</code> e através deste objeto, usaremos o método <code>addInterceptor</code> para adicionar um novo interceptador, este que verificará a mudanda de <code>locale</code> do usuário, um objeto do tipo &#96;LocaleChangeInterceptor´. Veja o código:</p>
<pre class="prettyprint"><code>public void addInterceptors(InterceptorRegistry registry) {
    registry.addInterceptor(new LocaleChangeInterceptor());
}</code></pre>
<p>O segundo passo é fornecer para o <em>Spring</em> um resolvedor de <code>locale</code> que, além de armazenar a configuração de <code>locale</code> do usuário, possa também carregar as páginas no idioma correto. Para isso criaremos o método <code>localeResolver</code> que retorna um objeto do mesmo tipo e dentro deste método apenas retornaremos um objeto da classe <code>CookieLocaleResolver</code>. </p>
<pre class="prettyprint"><code>&#64;Bean
public LocaleResolver localeResolver(){
    return new CookieLocaleResolver();
}</code></pre>
<p>Como este método retornará um objeto a ser usado pelo <em>Spring</em>, precisaremos anotá-lo com <code>&#64;Bean</code>. E é isso! Já funciona. Podemos mudar de idioma à vontade e navegar pelas páginas no idioma escolhido.</p>
<p>Nesta aula aprendemos a lidar com a problemática da internacionalização, vimos que o processo é bastante simples e que poucas configurações são necessárias. Vimos também o uso das tags <code>fmt:message</code> e <code>s:message</code> e como podemos organizar os textos das páginas em arquivos com extensão <code>.properties</code>. Agora chegou o momento de praticar um pouco mais com os exercícios.</p>

		</div>
	</div>
</section>
	
	
	
	
	
	
	
	
	
	
	
	

			
				



<section class="task-actions">
	<div class="container">
		





<a href="/forum/curso-springmvc-2-integracao-cache-seguranca-e-templates/exercicio-explicacao/18990/novo" class=" task-actions-button task-actions-button-forum" data-amplitude-onsubmit='{"name":"help-needed","course-code":"springmvc-2-integracao-cache-seguranca-e-templates","task-id":"18990","task-kind":"Explicação"}'>Tirar Dúvida</a><!--
		 --><a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/18990/next" class="task-actions-button task-body-actions-button task-actions-button-next">Próxima Atividade</a>
	</div>
</section>
			
		</main>
	</section>
	











<aside class="task-menu">
	<section class="task-menu-header">
		<button title="Abrir/Fechar menu" aria-label="Abrir/Fechar menu" type="button" class='openMenu-button task-menu-button '></button>
		<div class="task-menu-header-info">
			<a class="task-menu-header-info-title" href="/course/springmvc-2-integracao-cache-seguranca-e-templates" title="Ir para página do curso">
				<img src="https://www.alura.com.br/assets/api/cursos/springmvc-2-integracao-cache-seguranca-e-templates.svg" alt="ícone Spring MVC II: Integração, cache, segurança e templates" class="task-menu-header-info-title-icon " width="37.5px" height="37.5px"/>
				<h2 class="task-menu-header-info-title-text">Spring MVC II: Integração, cache, segurança e templates</h2>
			</a>
			<div class="task-menu-header-info-progress">
				
				<span class="task-menu-header-info-progress-percentage ">73%</span>
				<span class="task-menu-header-info-progress-bar" style="background-image: linear-gradient(to right, #9de482, #9de482 73%, transparent 73%);"></span>
			</div>
		</div>
	</section>
	
	<section class="task-menu-section">
		<div class="task-menu-section-title">
			<span class="task-menu-section-title-number ">Aula<strong>06</strong>
				<span>de 09</span></span>
			<h3 class="task-menu-section-title-text">
				Mudando o locale dinamicamente
			</h3>
		</div>
	</section>
	<nav class="task-menu-nav">
		<h2 class="task-menu-nav-title">
			Atividades
			<span>4 de 7</span>
		</h2>
		<ul class="task-menu-nav-list">
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12262" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#VIDEO" />
					</svg>
					<span class="task-menu-nav-item-number">01</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Vídeo 1">
							Vídeo 1
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">09min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12263" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#VIDEO" />
					</svg>
					<span class="task-menu-nav-item-number">02</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Vídeo 2">
							Vídeo 2
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">09min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12264" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#VIDEO" />
					</svg>
					<span class="task-menu-nav-item-number">03</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Vídeo 3">
							Vídeo 3
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">11min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				<li class="task-menu-nav-item task-menu-nav-item--selected">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/18990" class="task-menu-nav-item-link task-menu-nav-item-link-HQ_EXPLANATION">
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Explicação concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#HQ_EXPLANATION" />
					</svg>
					<span class="task-menu-nav-item-number">04</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Explicação">
							Explicação
						</span>
						
					</a>
				</li>
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12266" class="task-menu-nav-item-link task-menu-nav-item-link-OPEN_QUESTION">
					<svg class="task-menu-nav-item-svg " aria-label="Atividade de Exercício Aberto não concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#OPEN_QUESTION" />
					</svg>
					<span class="task-menu-nav-item-number">05</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Trabalhando com internacionalização">
							Trabalhando com internacionalização
						</span>
						
					</a>
				</li>
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12267" class="task-menu-nav-item-link task-menu-nav-item-link-OPEN_QUESTION">
					<svg class="task-menu-nav-item-svg " aria-label="Atividade de Exercício Aberto não concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#OPEN_QUESTION" />
					</svg>
					<span class="task-menu-nav-item-number">06</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Separando os idiomas">
							Separando os idiomas
						</span>
						
					</a>
				</li>
			
				<li class="task-menu-nav-item ">
					<a href="/course/springmvc-2-integracao-cache-seguranca-e-templates/task/12268" class="task-menu-nav-item-link task-menu-nav-item-link-OPEN_QUESTION">
					<svg class="task-menu-nav-item-svg " aria-label="Atividade de Exercício Aberto não concluída">
						<use xlink:href="/images/gnarus/classPage/icon-menu-icons.svg#OPEN_QUESTION" />
					</svg>
					<span class="task-menu-nav-item-number">07</span>
					<span class="task-menu-nav-item-text" >
						<span class="task-menu-nav-item-title" title="Alterando locale dinamicamente">
							Alterando locale dinamicamente
						</span>
						
					</a>
				</li>
			
		</ul>
	</nav>
	<section class="task-menu-sections">
		<h2 class="task-menu-sections-title">
			Aulas
		</h2>
		<select class="task-menu-sections-select" onchange="location.href='/course/springmvc-2-integracao-cache-seguranca-e-templates/section/'+this.value;">
			
				<option value="1" >01. Melhorando a home </option>
			
				<option value="2" >02. Retornando no formato JSON</option>
			
				<option value="3" >03. Usando o Bootstrap</option>
			
				<option value="4" >04. Personalizando o login e logout</option>
			
				<option value="5" >05. Trabalhando com Templates</option>
			
				<option value="6" selected>06. Mudando o locale dinamicamente</option>
			
				<option value="7" >07. Testando a aplicação</option>
			
				<option value="8" >08. Realizando Ajustes Finais no Projeto</option>
			
				<option value="9" >09. Publicando o projeto</option>
			
		</select>
	</section>
	<section class="task-menu-others">
		<h2 class="task-menu-others-title ">
			Outros Links
		</h2>
		<a href="/forum/curso-springmvc-2-integracao-cache-seguranca-e-templates/todos" class="task-menu-others-link task-menu-others-link-forum " title="Ir para o fórum do curso">Fórum</a>
		<a href="/dashboard" class="task-menu-others-link task-menu-others-link-curso" title="Ir para a página principal">Trocar Curso</a>
	</section>
	<section class="task-menu-footer">
		<a class="task-menu-footer-user" href="/user/altair-lage" title="Ir para sua página de usuário">
			<img src="https://www.gravatar.com/avatar/846d7bad034e3c292bc8e433e11b4683.png?r=PG&size=60x60&d=https%3A%2F%2Fcursos.alura.com.br%2Fimages%2Fforum%2Favatar_a.png" alt="Gravatar de Altair Lage" class="task-menu-footer-img" width="40px" height="40px"/>
			
				<p class="task-menu-footer-detalhes">
					<span class="task-menu-footer-detalhes-nome">Altair Lage</span>
					<span class="task-menu-footer-detalhes-xp">
						41.7k xp
					</span>
				</p>
			
			<input type="hidden" value="" />
			<input type="hidden" value="" />
		</a>
		<a href="/dashboard" class="task-menu-footer-logo">
			<img src="/images/gnarus/classPage/icon-menu-alura.svg" alt="Logo da Alura" class="task-menu-footer-logo-image" width="19px" height="32px" title="Ir para a página principal" />
		</a>
	</section>
</aside>
</section>




	<script src="/script/lib/jquery2/jquery-2.1.3.min.32015dd4.js"></script>
	<script src="/script/gnarus/block/buttonToggle.83185c05.js" async></script>
	<script src="/script/gnarus/block/sectionMenu.ba849510.js" async></script>

	<script src="/script/lib/marked.98ce0051.js"></script>
	<script src="/script/gnarus/block/markdownEditor.f940de44.js" async></script>
	<script src="/script/gnarus/block/caret.637d95c2.js" async></script>
	<script src="/js/gnarus/keydownWatchers.67f33811.js" async></script>
	<script src="/js/prettify.4992e3fe.js" async></script>

	<script src="/script/gnarus/block/preventsDoubleClick.0a7a943f.js" async></script>
	<script src="/script/gnarus/block/assessment.050f656f.js" async></script>
	<script src="/script/gnarus/block/login-form.1730703f.js" async></script>
	<script src="/script/gnarus/classPage/classPage.85152a83.js"></script>
	<script src="/script/gnarus/classPage/aria.a0feb01e.js"></script>
	<script src="/script/gnarus/classPage/phrase.80dcd2b8.js"></script>
	<script src="/script/gnarus/classPage/feedback.2d335882.js"></script>
	
	

	
	
	
	

	<script src="/script/musicdot/partitura.977fb5b2.js"></script>
	<script src="/script/gnarus/classPage/audioProgress.6f445a1c.js"></script>

	
	
	
		

<script type="text/javascript" src="/js/amplitude.f1f6e4b7.js"></script>

<script>

	amplitudeInit("84647047775d06b4051d80eccd387bd3");
	
	
		var userProperties = {"name":"Altair Lage","email":"altair.lage@datablink.com"};
		amplitudeIdentify("75042", userProperties);
	
	
	

	
	
	$('[data-amplitude]').on('click', function(){
		var data = $(this).data().amplitude;
		track(data);
	});
	
</script>

		
		
			<script>
				track({"name":"task-seen","course-code":"springmvc-2-integracao-cache-seguranca-e-templates","task-id":"18990","task-kind":"Explicação"});
			</script>
		
	
	
 

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"errorBeacon":"bam.nr-data.net","licenseKey":"b5f9030682","agent":"","beacon":"bam.nr-data.net","applicationTime":56,"applicationID":"12544460","transactionName":"ZVFTNhEEXEdTWkdeV1wbchcQEV1ZHVtBGVtdWR8BAgBeQV8XVFlZQEFCTAsEQFhXQEJCUVxaHwEMC0ZGXVVfUkocZ1QBFwxdWnFWXUNKXVhdBxFKQVxdTmdWS1k=","queueTime":0}</script></body>
</html>
